<div ng-include src="'views/menu.html'"></div>

<alert ng-repeat="alert in alerts" type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert>

<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">{{titulo}}</h3>
  </div>

  <div class="panel-body">

    <div class="row">
      <div class="col-lg-12">
        <div class="input-group">
                    <span class="input-group-btn">
                               <a class="btn btn-primary" ng-href="{{novoRegistroHref}}" ng-click="criaItem()"
                                  title="Novo registro">
                                 <span class="glyphicon glyphicon-file"></span> Novo registro
                               </a>
                               <a class="btn btn-primary" ng-click="excluiItensSelecionados()" title="Excluir"
                                  ng-disabled="itensSelecionados.length == 0">
                                 <span class="glyphicon glyphicon-trash"></span> Excluir selecionados
                               </a>
                    </span>
          <input ng-model="filtro" class="form-control" placeholder="Digite para pesquisar" autofocus
                 my-focus="true"/>
        </div>
      </div>
    </div>

    <br>

    <div class="table-responsive">
      <table class="table table-striped table-bordered table-hover">

        <tr>
          <th style=" text-align: center; width: 30px"><input type="checkbox" ng-model="selecionaTodos"
                                                              ng-change="selecionaTodosItens(selecionaTodos)">
          </th>

          <th ng-click="ordem = 'nossoNumero'; reverse=!reverse" ng-class="colunaSelecionada('nossoNumero')">Nosso número</th>
          <th ng-click="ordem = 'descricao'; reverse=!reverse" ng-class="colunaSelecionada('descricao')">Descrição</th>
          <th ng-click="ordem = 'competencia.ano'; reverse=!reverse" ng-class="colunaSelecionada('competencia.ano')">Ano</th>
          <th ng-click="ordem = 'competencia.mes'; reverse=!reverse" ng-class="colunaSelecionada('competencia.mes')">Mês</th>
          <th ng-click="ordem = 'valor'; reverse=!reverse" ng-class="colunaSelecionada('valor')">Valor</th>
          <th ng-click="ordem = 'vencimento'; reverse=!reverse" ng-class="colunaSelecionada('vencimento')">Vencimento</th>
        </tr>

        <tr ng-repeat="item in itens | orderBy:ordem:reverse | filter:filtro" ng-class="itemSelecionado(item)">
          <td style=" text-align: center; width: 30px"><input type="checkbox" ng-model="item.checked"
                                                              ng-change="selecionaItem(item)"></td>

          <td>{{item.nossoNumero}}</td>
          <td>{{item.descricao}}</td>
          <td>{{item.competencia.ano}}</td>
          <td>{{item.competencia.mes}}</td>
          <td>{{item.valor}}</td>
          <td>{{item.vencimento}}</td>

          <td width="200" style="text-align: center">
            <div class="btn-group">
              <a class="btn btn-primary" ng-href="{{novoRegistroHref}}" ng-click="editaItem(item)"
                 title="Editar">
                <span class="glyphicon glyphicon-pencil"></span> Editar
              </a>
              <a class="btn btn-primary" ng-click="excluiItem(item)" title="Excluir">
                <span class="glyphicon glyphicon-trash"></span> Excluir
              </a>
            </div>
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>